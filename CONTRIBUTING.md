# è´¡çŒ®æŒ‡å—

é¦–å…ˆï¼Œæ„Ÿè°¢æ‚¨èŠ±æ—¶é—´ä¸ºæœ¬é¡¹ç›®åšå‡ºè´¡çŒ®ï¼â¤ï¸

æˆ‘ä»¬æ¬¢è¿å¹¶é‡è§†å„ç§ç±»å‹çš„è´¡çŒ®ã€‚è¯·æŸ¥çœ‹[ç›®å½•](#ç›®å½•)äº†è§£ä¸åŒçš„è´¡çŒ®æ–¹å¼ä»¥åŠæœ¬é¡¹ç›®å¦‚ä½•å¤„ç†è¿™äº›è´¡çŒ®ã€‚åœ¨åšå‡ºè´¡çŒ®ä¹‹å‰ï¼Œè¯·åŠ¡å¿…é˜…è¯»ç›¸å…³ç« èŠ‚ï¼Œè¿™å°†ä½¿ç»´æŠ¤è€…çš„å·¥ä½œæ›´è½»æ¾ï¼Œå¹¶ä¸ºæ‰€æœ‰å‚ä¸è€…æä¾›æ›´æµç•…çš„ä½“éªŒã€‚æˆ‘ä»¬æœŸå¾…æ‚¨çš„è´¡çŒ®ï¼ğŸ‰

> å¦‚æœæ‚¨å–œæ¬¢è¿™ä¸ªé¡¹ç›®ï¼Œä½†æ²¡æœ‰æ—¶é—´è´¡çŒ®ï¼Œä¹Ÿæ²¡å…³ç³»ã€‚è¿˜æœ‰å…¶ä»–ç®€å•çš„æ–¹å¼æ¥æ”¯æŒé¡¹ç›®å¹¶è¡¨è¾¾æ‚¨çš„èµèµï¼Œæˆ‘ä»¬ä¹Ÿä¼šéå¸¸é«˜å…´ï¼š
> - ä¸ºé¡¹ç›®ç‚¹æ˜Ÿæ ‡ â­
> - åœ¨ç¤¾äº¤åª’ä½“ä¸Šåˆ†äº«
> - åœ¨æ‚¨çš„é¡¹ç›® README ä¸­å¼•ç”¨æœ¬é¡¹ç›®
> - åœ¨æœ¬åœ°æŠ€æœ¯èšä¼šä¸ŠæåŠæœ¬é¡¹ç›®å¹¶å‘Šè¯‰æ‚¨çš„æœ‹å‹/åŒäº‹

## ç›®å½•

- [è¡Œä¸ºå‡†åˆ™](#è¡Œä¸ºå‡†åˆ™)
- [æˆ‘æœ‰ç–‘é—®](#æˆ‘æœ‰ç–‘é—®)
- [æˆ‘æƒ³è´¡çŒ®](#æˆ‘æƒ³è´¡çŒ®)
  - [æŠ¥å‘Š Bug](#æŠ¥å‘Š-bug)
  - [æå‡ºåŠŸèƒ½å»ºè®®](#æå‡ºåŠŸèƒ½å»ºè®®)
  - [é¦–æ¬¡ä»£ç è´¡çŒ®](#é¦–æ¬¡ä»£ç è´¡çŒ®)
  - [æ”¹è¿›æ–‡æ¡£](#æ”¹è¿›æ–‡æ¡£)
- [å¼€å‘æŒ‡å—](#å¼€å‘æŒ‡å—)
  - [å¼€å‘ç¯å¢ƒè®¾ç½®](#å¼€å‘ç¯å¢ƒè®¾ç½®)
  - [é¡¹ç›®ç»“æ„](#é¡¹ç›®ç»“æ„)
  - [ç¼–ç è§„èŒƒ](#ç¼–ç è§„èŒƒ)
  - [æµ‹è¯•è§„èŒƒ](#æµ‹è¯•è§„èŒƒ)
  - [æäº¤ä¿¡æ¯è§„èŒƒ](#æäº¤ä¿¡æ¯è§„èŒƒ)
- [Pull Request æµç¨‹](#pull-request-æµç¨‹)
- [åŠ å…¥é¡¹ç›®å›¢é˜Ÿ](#åŠ å…¥é¡¹ç›®å›¢é˜Ÿ)

## è¡Œä¸ºå‡†åˆ™

æœ¬é¡¹ç›®åŠå…¶æ‰€æœ‰å‚ä¸è€…å‡å—[è¡Œä¸ºå‡†åˆ™](CODE_OF_CONDUCT.md)çº¦æŸã€‚å‚ä¸å³è¡¨ç¤ºæ‚¨åŒæ„éµå®ˆæ­¤å‡†åˆ™ã€‚è¯·å‘é¡¹ç›®ç»´æŠ¤è€…æŠ¥å‘Šä¸å¯æ¥å—çš„è¡Œä¸ºã€‚

## æˆ‘æœ‰ç–‘é—®

> åœ¨æé—®ä¹‹å‰ï¼Œè¯·å…ˆé˜…è¯»å¯ç”¨çš„[æ–‡æ¡£](README.md)å’Œ[è®¾è®¡æ–‡æ¡£](DESIGN.md)ã€‚

åœ¨æé—®ä¹‹å‰ï¼Œæœ€å¥½å…ˆæœç´¢ç°æœ‰çš„ [Issues](https://github.com/aliyun/alibabacloud-cs-mcp-server/issues)ï¼Œçœ‹çœ‹æ˜¯å¦èƒ½æ‰¾åˆ°ç­”æ¡ˆã€‚å¦‚æœæ‰¾åˆ°äº†ç›¸å…³ issue ä½†ä»éœ€è¦æ¾„æ¸…ï¼Œå¯ä»¥åœ¨è¯¥ issue ä¸­æé—®ã€‚åŒæ—¶ä¹Ÿå»ºè®®å…ˆåœ¨äº’è”ç½‘ä¸Šæœç´¢ç­”æ¡ˆã€‚

å¦‚æœæ‚¨ä»ç„¶éœ€è¦æé—®ï¼Œæˆ‘ä»¬å»ºè®®ï¼š

- åˆ›å»ºä¸€ä¸ªæ–°çš„ [Issue](https://github.com/aliyun/alibabacloud-cs-mcp-server/issues/new)
- å°½å¯èƒ½æä¾›è¯¦ç»†çš„ä¸Šä¸‹æ–‡ä¿¡æ¯
- æä¾›é¡¹ç›®å’Œå¹³å°ç‰ˆæœ¬ä¿¡æ¯ï¼ˆPython ç‰ˆæœ¬ã€æ“ä½œç³»ç»Ÿã€FastMCP ç‰ˆæœ¬ç­‰ï¼‰

æˆ‘ä»¬ä¼šå°½å¿«å¤„ç†æ‚¨çš„é—®é¢˜ã€‚

## æˆ‘æƒ³è´¡çŒ®

> ### æ³•å¾‹å£°æ˜
> åœ¨å‘æœ¬é¡¹ç›®è´¡çŒ®æ—¶ï¼Œæ‚¨å¿…é¡»åŒæ„æ‚¨æ‹¥æœ‰æ‰€è´¡çŒ®å†…å®¹ 100% çš„ç‰ˆæƒï¼Œæ‚¨æ‹¥æœ‰å¿…è¦çš„å†…å®¹æƒåˆ©ï¼Œå¹¶ä¸”æ‚¨è´¡çŒ®çš„å†…å®¹å¯ä»¥åœ¨é¡¹ç›®è®¸å¯è¯ä¸‹æä¾›ã€‚

### æŠ¥å‘Š Bug

#### æäº¤ Bug æŠ¥å‘Šä¹‹å‰

ä¸€ä¸ªå¥½çš„ Bug æŠ¥å‘Šä¸åº”è¯¥è®©å…¶ä»–äººéœ€è¦è¿½ç€æ‚¨è¦æ›´å¤šä¿¡æ¯ã€‚å› æ­¤ï¼Œæˆ‘ä»¬è¦æ±‚æ‚¨ä»”ç»†è°ƒæŸ¥ã€æ”¶é›†ä¿¡æ¯å¹¶åœ¨æŠ¥å‘Šä¸­è¯¦ç»†æè¿°é—®é¢˜ã€‚è¯·æå‰å®Œæˆä»¥ä¸‹æ­¥éª¤ï¼Œä»¥å¸®åŠ©æˆ‘ä»¬å°½å¿«ä¿®å¤æ½œåœ¨çš„ Bugï¼š

- ç¡®ä¿æ‚¨ä½¿ç”¨çš„æ˜¯æœ€æ–°ç‰ˆæœ¬
- ç¡®è®¤æ‚¨çš„é—®é¢˜ç¡®å®æ˜¯ä¸€ä¸ª Bugï¼Œè€Œä¸æ˜¯æ‚¨è‡ªå·±çš„é…ç½®é—®é¢˜ï¼ˆä¾‹å¦‚ä½¿ç”¨ä¸å…¼å®¹çš„ç¯å¢ƒç»„ä»¶/ç‰ˆæœ¬ï¼‰
- åœ¨ [Bug è·Ÿè¸ªå™¨](https://github.com/aliyun/alibabacloud-cs-mcp-server/issues?q=label%3Abug)ä¸­æŸ¥çœ‹æ˜¯å¦å·²æœ‰ç›¸åŒçš„ Bug æŠ¥å‘Š
- åœ¨äº’è”ç½‘ï¼ˆåŒ…æ‹¬ Stack Overflowï¼‰ä¸Šæœç´¢ï¼Œçœ‹æ˜¯å¦æœ‰å…¶ä»–ç”¨æˆ·è®¨è®ºè¿‡æ­¤é—®é¢˜
- æ”¶é›†å…³äº Bug çš„ä¿¡æ¯ï¼š
  - å †æ ˆè·Ÿè¸ªï¼ˆTracebackï¼‰
  - æ“ä½œç³»ç»Ÿã€å¹³å°å’Œç‰ˆæœ¬ï¼ˆWindowsã€Linuxã€macOSã€x86ã€ARMï¼‰
  - Python ç‰ˆæœ¬ã€FastMCP ç‰ˆæœ¬ã€ä¾èµ–åŒ…ç‰ˆæœ¬
  - æ‚¨çš„è¾“å…¥å’Œå®é™…è¾“å‡º
  - èƒ½å¦ç¨³å®šé‡ç°è¯¥é—®é¢˜ï¼Ÿèƒ½å¦åœ¨æ—§ç‰ˆæœ¬ä¸­é‡ç°ï¼Ÿ

#### å¦‚ä½•æäº¤ä¸€ä¸ªå¥½çš„ Bug æŠ¥å‘Šï¼Ÿ

> åˆ‡å‹¿åœ¨ issue è·Ÿè¸ªå™¨æˆ–å…¶ä»–å…¬å…±åœºæ‰€æŠ¥å‘Šå®‰å…¨ç›¸å…³çš„é—®é¢˜ã€æ¼æ´æˆ–åŒ…å«æ•æ„Ÿä¿¡æ¯çš„ Bugã€‚ç›¸åï¼Œæ•æ„Ÿ Bug å¿…é¡»é€šè¿‡é‚®ä»¶å‘é€åˆ°é¡¹ç›®ç»´æŠ¤è€…ã€‚

æˆ‘ä»¬ä½¿ç”¨ GitHub Issues æ¥è·Ÿè¸ª Bug å’Œé”™è¯¯ã€‚å¦‚æœæ‚¨é‡åˆ°é¡¹ç›®é—®é¢˜ï¼š

- åˆ›å»ºä¸€ä¸ª [Issue](https://github.com/aliyun/alibabacloud-cs-mcp-server/issues/new)
- è§£é‡Šæ‚¨æœŸæœ›çš„è¡Œä¸ºå’Œå®é™…è¡Œä¸º
- è¯·æä¾›å°½å¯èƒ½å¤šçš„ä¸Šä¸‹æ–‡ï¼Œå¹¶æè¿°**é‡ç°æ­¥éª¤**ï¼Œä»¥ä¾¿å…¶ä»–äººå¯ä»¥è·Ÿéšè¿™äº›æ­¥éª¤åœ¨ä»–ä»¬è‡ªå·±çš„ç¯å¢ƒä¸­é‡ç°é—®é¢˜ã€‚è¿™é€šå¸¸åŒ…æ‹¬æ‚¨çš„ä»£ç ã€‚ä¼˜ç§€çš„ Bug æŠ¥å‘Šåº”è¯¥éš”ç¦»é—®é¢˜å¹¶åˆ›å»ºç®€åŒ–çš„æµ‹è¯•ç”¨ä¾‹
- æä¾›æ‚¨åœ¨ä¸Šä¸€èŠ‚ä¸­æ”¶é›†çš„ä¿¡æ¯

æäº¤åï¼š

- é¡¹ç›®å›¢é˜Ÿå°†ç›¸åº”åœ°æ ‡è®° issue
- å›¢é˜Ÿæˆå‘˜å°†å°è¯•ä½¿ç”¨æ‚¨æä¾›çš„æ­¥éª¤é‡ç°é—®é¢˜ã€‚å¦‚æœæ²¡æœ‰é‡ç°æ­¥éª¤æˆ–æ²¡æœ‰æ˜æ˜¾çš„æ–¹æ³•æ¥é‡ç°é—®é¢˜ï¼Œå›¢é˜Ÿä¼šè¦æ±‚æ‚¨æä¾›è¿™äº›æ­¥éª¤å¹¶å°† issue æ ‡è®°ä¸º `needs-repro`
- å¦‚æœå›¢é˜Ÿèƒ½å¤Ÿé‡ç°é—®é¢˜ï¼Œå®ƒå°†è¢«æ ‡è®°ä¸º `needs-fix`ï¼Œä»¥åŠå¯èƒ½çš„å…¶ä»–æ ‡ç­¾ï¼ˆå¦‚ `critical`ï¼‰ï¼Œç„¶åç­‰å¾…[å®ç°](#é¦–æ¬¡ä»£ç è´¡çŒ®)

### æå‡ºåŠŸèƒ½å»ºè®®

æœ¬èŠ‚æŒ‡å¯¼æ‚¨ä¸º ack-mcp-server æäº¤åŠŸèƒ½å»ºè®®ï¼Œ**åŒ…æ‹¬å…¨æ–°åŠŸèƒ½å’Œå¯¹ç°æœ‰åŠŸèƒ½çš„æ”¹è¿›**ã€‚

#### æäº¤åŠŸèƒ½å»ºè®®ä¹‹å‰

- ç¡®ä¿æ‚¨ä½¿ç”¨çš„æ˜¯æœ€æ–°ç‰ˆæœ¬
- ä»”ç»†é˜…è¯»[æ–‡æ¡£](README.md)å’Œ[è®¾è®¡æ–‡æ¡£](DESIGN.md)ï¼Œç¡®è®¤è¯¥åŠŸèƒ½å°šæœªæ¶µç›–
- æ‰§è¡Œ[æœç´¢](https://github.com/aliyun/alibabacloud-cs-mcp-server/issues)ä»¥æŸ¥çœ‹è¯¥åŠŸèƒ½å»ºè®®æ˜¯å¦å·²è¢«æå‡ºã€‚å¦‚æœå·²ç»å­˜åœ¨ï¼Œè¯·åœ¨ç°æœ‰ issue ä¸­æ·»åŠ è¯„è®ºï¼Œè€Œä¸æ˜¯åˆ›å»ºæ–°çš„
- ç¡®å®šæ‚¨çš„æƒ³æ³•æ˜¯å¦ç¬¦åˆé¡¹ç›®çš„èŒƒå›´å’Œç›®æ ‡ã€‚æ‚¨éœ€è¦å‘é¡¹ç›®å¼€å‘è€…å……åˆ†è¯´æ˜æ­¤åŠŸèƒ½çš„ä¼˜ç‚¹ã€‚è¯·è®°ä½ï¼Œæˆ‘ä»¬å¸Œæœ›åŠŸèƒ½å¯¹å¤§å¤šæ•°ç”¨æˆ·æœ‰ç”¨ï¼Œè€Œä¸ä»…ä»…æ˜¯ä¸€å°éƒ¨åˆ†ç”¨æˆ·

#### å¦‚ä½•æäº¤ä¸€ä¸ªå¥½çš„åŠŸèƒ½å»ºè®®ï¼Ÿ

åŠŸèƒ½å»ºè®®é€šè¿‡ [GitHub Issues](https://github.com/aliyun/alibabacloud-cs-mcp-server/issues) è·Ÿè¸ªï¼š

- ä½¿ç”¨**æ¸…æ™°å’Œæè¿°æ€§çš„æ ‡é¢˜**æ¥æ ‡è¯†å»ºè®®
- å°½å¯èƒ½è¯¦ç»†åœ°æä¾›**å»ºè®®åŠŸèƒ½çš„åˆ†æ­¥æè¿°**
- **æè¿°å½“å‰è¡Œä¸º**å¹¶**è§£é‡Šæ‚¨æœŸæœ›çœ‹åˆ°çš„è¡Œä¸º**ä»¥åŠåŸå› 
- æ‚¨å¯ä»¥**åŒ…å«æˆªå›¾å’ŒåŠ¨ç”» GIF** æ¥å¸®åŠ©æ¼”ç¤ºæ­¥éª¤æˆ–æŒ‡å‡ºå»ºè®®ç›¸å…³çš„éƒ¨åˆ†
- **è§£é‡Šä¸ºä»€ä¹ˆæ­¤å¢å¼ºåŠŸèƒ½å¯¹å¤§å¤šæ•°ç”¨æˆ·æœ‰ç”¨**
- åˆ—å‡ºæ‚¨å‚è€ƒçš„å…¶ä»–é¡¹ç›®æˆ–å®ç°

### é¦–æ¬¡ä»£ç è´¡çŒ®

ä¸ç¡®å®šä»å“ªé‡Œå¼€å§‹è´¡çŒ®ï¼Ÿæ‚¨å¯ä»¥ä»è¿™äº› `good-first-issue` å’Œ `help-wanted` issues å¼€å§‹ï¼š

- [Good First Issues](https://github.com/aliyun/alibabacloud-cs-mcp-server/issues?q=is%3Aissue+is%3Aopen+label%3A%22good+first+issue%22) - é€‚åˆåˆå­¦è€…çš„é—®é¢˜
- [Help Wanted Issues](https://github.com/aliyun/alibabacloud-cs-mcp-server/issues?q=is%3Aissue+is%3Aopen+label%3A%22help+wanted%22) - éœ€è¦ç¤¾åŒºå¸®åŠ©çš„é—®é¢˜

### æ”¹è¿›æ–‡æ¡£

æ–‡æ¡£æ”¹è¿›æ€»æ˜¯å—æ¬¢è¿çš„ï¼æ‚¨å¯ä»¥ï¼š

- ä¿®å¤æ–‡æ¡£ä¸­çš„æ‹¼å†™é”™è¯¯æˆ–è¯­æ³•é”™è¯¯
- æ”¹è¿›ç°æœ‰æ–‡æ¡£çš„æ¸…æ™°åº¦
- ä¸ºç¼ºå°‘æ–‡æ¡£çš„åŠŸèƒ½æ·»åŠ æ–‡æ¡£
- æ·»åŠ æ›´å¤šç¤ºä¾‹å’Œç”¨ä¾‹
- ç¿»è¯‘æ–‡æ¡£åˆ°å…¶ä»–è¯­è¨€

## å¼€å‘æŒ‡å—

### å¼€å‘ç¯å¢ƒè®¾ç½®

#### å‰ç½®è¦æ±‚

- Python 3.12+
- Git
- uv æˆ– pipï¼ˆæ¨èä½¿ç”¨ uvï¼‰
- Dockerï¼ˆå¯é€‰ï¼Œç”¨äºå®¹å™¨åŒ–æµ‹è¯•ï¼‰
- kubectlï¼ˆå¯é€‰ï¼Œç”¨äº Kubernetes åŠŸèƒ½æµ‹è¯•ï¼‰

#### è®¾ç½®æ­¥éª¤

1. **Fork å¹¶å…‹éš†ä»“åº“**

```bash
git clone https://github.com/YOUR_USERNAME/alibabacloud-cs-mcp-server.git
cd alibabacloud-cs-mcp-server
```

2. **åˆ›å»ºè™šæ‹Ÿç¯å¢ƒå¹¶å®‰è£…ä¾èµ–**

```bash
# ä½¿ç”¨ uvï¼ˆæ¨èï¼‰
uv sync

# æˆ–ä½¿ç”¨ pip
python -m venv .venv
source .venv/bin/activate  # Linux/macOS
# .venv\Scripts\activate  # Windows
pip install -r requirements.txt
```

3. **é…ç½®ç¯å¢ƒå˜é‡**

```bash
cp .env.example .env
# ç¼–è¾‘ .env æ–‡ä»¶ï¼Œå¡«å†™æ‚¨çš„é˜¿é‡Œäº‘ AccessKey ä¿¡æ¯
```

4. **è¿è¡Œæµ‹è¯•**

```bash
# è¿è¡Œæ‰€æœ‰æµ‹è¯•
make test

# è¿è¡Œç‰¹å®šæµ‹è¯•
pytest src/tests/test_ack_cluster_handler.py

# è¿è¡Œæµ‹è¯•å¹¶ç”Ÿæˆè¦†ç›–ç‡æŠ¥å‘Š
make test-cov
```

5. **è¿è¡ŒæœåŠ¡å™¨**

```bash
# stdio æ¨¡å¼
make run

# HTTP æ¨¡å¼
make run-http

# SSE æ¨¡å¼
make run-sse
```

### é¡¹ç›®ç»“æ„

è¯·å‚è€ƒ [DESIGN.md](DESIGN.md) äº†è§£è¯¦ç»†çš„é¡¹ç›®ç»“æ„å’Œæ¶æ„è®¾è®¡ã€‚å…³é”®ç›®å½•ï¼š

```
src/
â”œâ”€â”€ main_server.py           # ä¸»æœåŠ¡å™¨å…¥å£
â”œâ”€â”€ runtime_provider.py      # è¿è¡Œæ—¶æä¾›è€…
â”œâ”€â”€ config.py               # é…ç½®ç®¡ç†
â”œâ”€â”€ models.py               # æ•°æ®æ¨¡å‹
â”œâ”€â”€ *_handler.py            # åŠŸèƒ½å¤„ç†å™¨
â”œâ”€â”€ interfaces/             # æ¥å£å®šä¹‰
â”œâ”€â”€ tests/                  # æµ‹è¯•æ–‡ä»¶
â””â”€â”€ prometheus_metrics_guidance/  # Prometheus æŒ‡æ ‡æŒ‡å¯¼
```

### ç¼–ç è§„èŒƒ

æˆ‘ä»¬ä½¿ç”¨ä»¥ä¸‹å·¥å…·ç¡®ä¿ä»£ç è´¨é‡ï¼š

#### ä»£ç æ ¼å¼åŒ–

```bash
# ä½¿ç”¨ ruff æ ¼å¼åŒ–ä»£ç 
ruff format src/

# æˆ–ä½¿ç”¨ make å‘½ä»¤
make format
```

#### ä»£ç æ£€æŸ¥

```bash
# è¿è¡Œ ruff ä»£ç æ£€æŸ¥
ruff check src/

# è¿è¡Œ mypy ç±»å‹æ£€æŸ¥
mypy src/

# æˆ–ä½¿ç”¨ make å‘½ä»¤
make lint
```

#### ç¼–ç æ ‡å‡†

1. **Python ç‰ˆæœ¬**: ä½¿ç”¨ Python 3.12+
2. **è¡Œé•¿åº¦**: æœ€å¤§ 99 å­—ç¬¦
3. **å¼•å·**: ä½¿ç”¨åŒå¼•å·
4. **å¯¼å…¥é¡ºåº**: ä½¿ç”¨ isortï¼ˆé€šè¿‡ ruff é›†æˆï¼‰
5. **ç±»å‹æ³¨è§£**: æ‰€æœ‰å‡½æ•°å¿…é¡»åŒ…å«ç±»å‹æ³¨è§£
6. **æ–‡æ¡£å­—ç¬¦ä¸²**: æ‰€æœ‰å…¬å…±å‡½æ•°ã€ç±»å’Œæ¨¡å—å¿…é¡»åŒ…å« docstring

#### å‘½åçº¦å®š

- **æ–‡ä»¶å**: `snake_case.py`
- **ç±»å**: `PascalCase`
- **å‡½æ•°å**: `snake_case`
- **å¸¸é‡**: `UPPER_CASE_WITH_UNDERSCORES`
- **ç§æœ‰æˆå‘˜**: `_leading_underscore`

#### Handler å¼€å‘è§„èŒƒ

åˆ›å»ºæ–°çš„ Handler æ—¶ï¼Œè¯·éµå¾ªä»¥ä¸‹æ¨¡å¼ï¼š

```python
from fastmcp import FastMCP, Context
from pydantic import Field
from typing import Dict, Any, Optional

class NewFeatureHandler:
    """æ–°åŠŸèƒ½å¤„ç†å™¨çš„æè¿°ã€‚"""
    
    def __init__(self, mcp: FastMCP, config: Optional[Dict[str, Any]] = None):
        """åˆå§‹åŒ– Handler å¹¶æ³¨å†Œå·¥å…·ã€‚"""
        self.mcp = mcp
        self.config = config or {}
        self._register_tools()
    
    def _register_tools(self):
        """æ³¨å†Œ MCP å·¥å…·ã€‚"""
        self.mcp.tool(name="tool-name")(self.tool_function)
    
    async def tool_function(
        self,
        ctx: Context = None,
        param: str = Field(..., description="å‚æ•°æè¿°"),
    ) -> str:
        """å·¥å…·å‡½æ•°çš„è¯¦ç»†æ–‡æ¡£ã€‚
        
        ## ä½¿ç”¨è¦æ±‚
        - åˆ—å‡ºä½¿ç”¨è¦æ±‚
        
        ## å‚æ•°
        - param: å‚æ•°è¯´æ˜
        
        ## è¿”å›å€¼
        è¿”å›å€¼è¯´æ˜
        """
        try:
            # ä»ä¸Šä¸‹æ–‡è·å–æä¾›è€…
            providers = ctx.request_context.lifespan_context.get("providers", {})
            
            # å®ç°é€»è¾‘
            # ...
            
            return result
        except Exception as e:
            logger.error(f"é”™è¯¯ä¿¡æ¯: {str(e)}")
            await ctx.error(f"é”™è¯¯ä¿¡æ¯: {str(e)}")
            raise
```

### æµ‹è¯•è§„èŒƒ

#### æµ‹è¯•è¦æ±‚

1. **æµ‹è¯•è¦†ç›–ç‡**: æ‰€æœ‰æ–°ä»£ç å¿…é¡»è¾¾åˆ° 100% æµ‹è¯•è¦†ç›–ç‡
2. **æµ‹è¯•ç±»å‹**: 
   - å•å…ƒæµ‹è¯•ï¼šæµ‹è¯•å•ä¸ªå‡½æ•°
   - é›†æˆæµ‹è¯•ï¼šæµ‹è¯• Handler ä¸æœåŠ¡çš„é›†æˆ
3. **æµ‹è¯•æ¡†æ¶**: ä½¿ç”¨ pytest
4. **å¼‚æ­¥æµ‹è¯•**: ä½¿ç”¨ pytest-asyncio

#### æµ‹è¯•æ–‡ä»¶ç»„ç»‡

```
src/tests/
â”œâ”€â”€ test_ack_cluster_handler.py
â”œâ”€â”€ test_kubectl_handler.py
â”œâ”€â”€ test_runtime_provider.py
â””â”€â”€ verify_all_test_coverage.py
```

#### æµ‹è¯•ç¤ºä¾‹

```python
import pytest
from unittest.mock import Mock, AsyncMock, patch

@pytest.mark.asyncio
async def test_tool_function():
    """æµ‹è¯•å·¥å…·å‡½æ•°çš„æ­£å¸¸æƒ…å†µã€‚"""
    # Arrange
    mock_mcp = Mock()
    handler = NewFeatureHandler(mock_mcp, {})
    
    mock_ctx = Mock()
    mock_ctx.request_context.lifespan_context = {
        "providers": {"client_factory": Mock()}
    }
    
    # Act
    result = await handler.tool_function(mock_ctx, param="test")
    
    # Assert
    assert result is not None
    assert "expected" in result

@pytest.mark.asyncio
async def test_tool_function_error():
    """æµ‹è¯•å·¥å…·å‡½æ•°çš„é”™è¯¯å¤„ç†ã€‚"""
    # æµ‹è¯•å¼‚å¸¸æƒ…å†µ
    pass
```

#### è¿è¡Œæµ‹è¯•

```bash
# è¿è¡Œæ‰€æœ‰æµ‹è¯•
pytest

# è¿è¡Œç‰¹å®šæµ‹è¯•æ–‡ä»¶
pytest src/tests/test_ack_cluster_handler.py

# è¿è¡Œç‰¹å®šæµ‹è¯•å‡½æ•°
pytest src/tests/test_ack_cluster_handler.py::test_list_clusters

# ç”Ÿæˆè¦†ç›–ç‡æŠ¥å‘Š
pytest --cov=src --cov-report=html

# éªŒè¯æµ‹è¯•è¦†ç›–ç‡
python src/tests/verify_all_test_coverage.py
```

### æäº¤ä¿¡æ¯è§„èŒƒ

æˆ‘ä»¬ä½¿ç”¨ [Conventional Commits](https://www.conventionalcommits.org/) è§„èŒƒï¼š

#### æäº¤æ¶ˆæ¯æ ¼å¼

```
<type>(<scope>): <subject>

<body>

<footer>
```

#### Type ç±»å‹

- `feat`: æ–°åŠŸèƒ½
- `fix`: Bug ä¿®å¤
- `docs`: æ–‡æ¡£æ›´æ”¹
- `style`: ä»£ç æ ¼å¼ï¼ˆä¸å½±å“ä»£ç è¿è¡Œçš„å˜åŠ¨ï¼‰
- `refactor`: é‡æ„ï¼ˆæ—¢ä¸æ˜¯æ–°å¢åŠŸèƒ½ï¼Œä¹Ÿä¸æ˜¯ä¿®æ”¹ Bug çš„ä»£ç å˜åŠ¨ï¼‰
- `perf`: æ€§èƒ½ä¼˜åŒ–
- `test`: æ·»åŠ æˆ–ä¿®æ”¹æµ‹è¯•
- `chore`: æ„å»ºè¿‡ç¨‹æˆ–è¾…åŠ©å·¥å…·çš„å˜åŠ¨
- `ci`: CI é…ç½®æ–‡ä»¶å’Œè„šæœ¬çš„å˜åŠ¨

#### Scope èŒƒå›´

- `cluster`: ACK é›†ç¾¤ç®¡ç†
- `kubectl`: Kubernetes æ“ä½œ
- `prometheus`: Prometheus ç›‘æ§
- `audit`: å®¡è®¡æ—¥å¿—
- `diagnose`: è¯Šæ–­åŠŸèƒ½
- `inspect`: å·¡æ£€åŠŸèƒ½
- `runtime`: è¿è¡Œæ—¶æä¾›è€…
- `deps`: ä¾èµ–ç®¡ç†

#### ç¤ºä¾‹

```
feat(prometheus): æ·»åŠ è‡ªç„¶è¯­è¨€è½¬ PromQL åŠŸèƒ½

- å®ç° NL2PromQL è½¬æ¢é€»è¾‘
- æ·»åŠ  Prometheus æŒ‡æ ‡æŒ‡å¯¼çŸ¥è¯†åº“
- å¢åŠ ç›¸å…³å•å…ƒæµ‹è¯•

Closes #123
```

```
fix(kubectl): ä¿®å¤è·å– Pod æ—¥å¿—æ—¶çš„ç¼–ç é—®é¢˜

å½“ Pod æ—¥å¿—åŒ…å«é UTF-8 å­—ç¬¦æ—¶ä¼šå¯¼è‡´è§£ç é”™è¯¯ã€‚
ç°åœ¨ä½¿ç”¨ errors='replace' å‚æ•°æ¥å¤„ç†æ— æ•ˆå­—ç¬¦ã€‚

Fixes #456
```

## Pull Request æµç¨‹

### æäº¤ PR ä¹‹å‰

1. **ç¡®ä¿ä»£ç é€šè¿‡æ‰€æœ‰æ£€æŸ¥**

```bash
# æ ¼å¼åŒ–ä»£ç 
make format

# è¿è¡Œä»£ç æ£€æŸ¥
make lint

# è¿è¡Œæµ‹è¯•
make test

# éªŒè¯æµ‹è¯•è¦†ç›–ç‡
python src/tests/verify_all_test_coverage.py
```

2. **æ›´æ–°æ–‡æ¡£**
   - å¦‚æœæ·»åŠ äº†æ–°åŠŸèƒ½ï¼Œæ›´æ–° README.md
   - å¦‚æœæ›´æ”¹äº†æ¶æ„ï¼Œæ›´æ–° DESIGN.md
   - æ·»åŠ æˆ–æ›´æ–°ç›¸å…³çš„ docstring

3. **æ·»åŠ æµ‹è¯•**
   - ä¸ºæ–°åŠŸèƒ½æ·»åŠ æµ‹è¯•
   - ç¡®ä¿æµ‹è¯•è¦†ç›–ç‡è¾¾åˆ° 100%

### æäº¤ PR

1. **åˆ›å»ºç‰¹æ€§åˆ†æ”¯**

```bash
git checkout -b feature/my-new-feature
# æˆ–
git checkout -b fix/bug-description
```

2. **æäº¤æ›´æ”¹**

```bash
git add .
git commit -m "feat(scope): æè¿°æ‚¨çš„æ›´æ”¹"
```

3. **æ¨é€åˆ°æ‚¨çš„ Fork**

```bash
git push origin feature/my-new-feature
```

4. **åˆ›å»º Pull Request**
   - è®¿é—® GitHub ä»“åº“
   - ç‚¹å‡» "New Pull Request"
   - é€‰æ‹©æ‚¨çš„åˆ†æ”¯
   - å¡«å†™ PR æ¨¡æ¿

### PR æ¨¡æ¿

```markdown
## æè¿°
ç®€è¦æè¿°è¿™ä¸ª PR çš„ç›®çš„å’Œæ›´æ”¹å†…å®¹ã€‚

## æ›´æ”¹ç±»å‹
- [ ] Bug ä¿®å¤
- [ ] æ–°åŠŸèƒ½
- [ ] é‡æ„
- [ ] æ–‡æ¡£æ›´æ–°
- [ ] æ€§èƒ½ä¼˜åŒ–
- [ ] å…¶ä»–ï¼ˆè¯·è¯´æ˜ï¼‰

## ç›¸å…³ Issue
Closes #(issue number)

## æµ‹è¯•
æè¿°æ‚¨å¦‚ä½•æµ‹è¯•è¿™äº›æ›´æ”¹ï¼š
- [ ] æ·»åŠ äº†æ–°çš„å•å…ƒæµ‹è¯•
- [ ] æ‰€æœ‰ç°æœ‰æµ‹è¯•é€šè¿‡
- [ ] æ‰‹åŠ¨æµ‹è¯•åœºæ™¯

## æ£€æŸ¥æ¸…å•
- [ ] ä»£ç éµå¾ªé¡¹ç›®çš„ç¼–ç è§„èŒƒ
- [ ] å·²è¿è¡Œä»£ç æ ¼å¼åŒ–å·¥å…·
- [ ] å·²æ·»åŠ /æ›´æ–°ç›¸å…³æ–‡æ¡£
- [ ] å·²æ·»åŠ /æ›´æ–°æµ‹è¯•
- [ ] æµ‹è¯•è¦†ç›–ç‡è¾¾åˆ° 100%
- [ ] æäº¤ä¿¡æ¯éµå¾ªè§„èŒƒ
```

### PR å®¡æŸ¥æµç¨‹

1. **è‡ªåŠ¨æ£€æŸ¥**: CI/CD ä¼šè‡ªåŠ¨è¿è¡Œæµ‹è¯•å’Œä»£ç æ£€æŸ¥
2. **ä»£ç å®¡æŸ¥**: è‡³å°‘ä¸€åç»´æŠ¤è€…ä¼šå®¡æŸ¥æ‚¨çš„ä»£ç 
3. **åé¦ˆå¤„ç†**: æ ¹æ®åé¦ˆè¿›è¡Œå¿…è¦çš„ä¿®æ”¹
4. **åˆå¹¶**: å®¡æŸ¥é€šè¿‡åï¼Œç»´æŠ¤è€…ä¼šåˆå¹¶æ‚¨çš„ PR

## åŠ å…¥é¡¹ç›®å›¢é˜Ÿ

å¦‚æœæ‚¨å¯¹æˆä¸ºé¡¹ç›®ç»´æŠ¤è€…æ„Ÿå…´è¶£ï¼Œè¯·ï¼š

1. æŒç»­è´¡çŒ®é«˜è´¨é‡çš„ä»£ç 
2. ç§¯æå‚ä¸ issue è®¨è®ºå’Œ PR å®¡æŸ¥
3. å¸®åŠ©å…¶ä»–è´¡çŒ®è€…
4. è”ç³»ç°æœ‰ç»´æŠ¤è€…è¡¨è¾¾æ‚¨çš„å…´è¶£

## å¼€å‘èµ„æº

### é‡è¦æ–‡æ¡£

- [README.md](README.md) - é¡¹ç›®æ¦‚è¿°å’Œä½¿ç”¨æŒ‡å—
- [DESIGN.md](DESIGN.md) - æ¶æ„è®¾è®¡å’Œå¼€å‘æŒ‡å—
- [Makefile](Makefile) - å¸¸ç”¨å¼€å‘å‘½ä»¤

### æœ‰ç”¨çš„å‘½ä»¤

```bash
# ä»£ç æ ¼å¼åŒ–
make format

# ä»£ç æ£€æŸ¥
make lint

# è¿è¡Œæµ‹è¯•
make test

# æµ‹è¯•è¦†ç›–ç‡
make test-cov

# æ„å»º Docker é•œåƒ
make docker-build-amd64

# è¿è¡ŒæœåŠ¡å™¨ï¼ˆä¸åŒæ¨¡å¼ï¼‰
make run          # stdio
make run-http     # HTTP
make run-sse      # SSE

# æ¸…ç†æ„å»ºæ–‡ä»¶
make clean
```

### è·å–å¸®åŠ©

å¦‚æœæ‚¨åœ¨è´¡çŒ®è¿‡ç¨‹ä¸­é‡åˆ°é—®é¢˜ï¼š

1. æŸ¥çœ‹[æ–‡æ¡£](README.md)å’Œ[è®¾è®¡æ–‡æ¡£](DESIGN.md)
2. æœç´¢ç°æœ‰çš„ [Issues](https://github.com/aliyun/alibabacloud-cs-mcp-server/issues)
3. åœ¨ [Discussions](https://github.com/aliyun/alibabacloud-cs-mcp-server/discussions) ä¸­æé—®
4. åˆ›å»ºæ–°çš„ Issue æè¿°æ‚¨çš„é—®é¢˜

## è‡´è°¢

æ„Ÿè°¢æ‰€æœ‰ä¸ºæœ¬é¡¹ç›®åšå‡ºè´¡çŒ®çš„äººï¼æ‚¨çš„åŠªåŠ›ä½¿è¿™ä¸ªé¡¹ç›®å˜å¾—æ›´å¥½ã€‚

æœ¬æŒ‡å—åŸºäº [contributing.md](https://contributing.md/example/) æ¨¡æ¿åˆ›å»ºã€‚