# ACK Cluster Management MCP Server æµ‹è¯•å¿«é€ŸæŒ‡å—

## ğŸš€ å¿«é€Ÿå¼€å§‹

### 1. ç¯å¢ƒå‡†å¤‡

åˆ›å»º `.env` æ–‡ä»¶åœ¨é¡¹ç›®æ ¹ç›®å½•ï¼š

```bash
# å¤åˆ¶ç¤ºä¾‹é…ç½®æ–‡ä»¶
cp .env.example .env

# ç¼–è¾‘é…ç½®æ–‡ä»¶ï¼Œæ·»åŠ æ‚¨çš„é˜¿é‡Œäº‘å‡­è¯
vim .env
```

`.env` æ–‡ä»¶ç¤ºä¾‹å†…å®¹ï¼š
```bash
# é˜¿é‡Œäº‘è®¤è¯é…ç½®ï¼ˆå¿…éœ€ï¼‰
ACCESS_KEY_ID=your_access_key_id_here
ACCESS_KEY_SECRET=your_access_key_secret_here
REGION_ID=cn-hangzhou

# å¯é€‰é…ç½®
DEFAULT_CLUSTER_ID=your_cluster_id_here
ALLOW_WRITE=false
DEVELOPMENT=true
```

### 2. å®‰è£…æµ‹è¯•ä¾èµ–

```bash
pip install pytest pytest-asyncio python-dotenv
```

### 3. è¿è¡Œæµ‹è¯•

```bash
# è¿›å…¥æµ‹è¯•ç›®å½•
cd src/ack-cluster-management-mcp-server

# è¿è¡Œæ‰€æœ‰æµ‹è¯•
./run_tests.sh

# è¿è¡Œç‰¹å®šç±»å‹çš„æµ‹è¯•
./run_tests.sh tools    # åªè¿è¡Œå·¥å…·æ–¹æ³•æµ‹è¯•
./run_tests.sh basic    # åªè¿è¡ŒåŸºç¡€åŠŸèƒ½æµ‹è¯•  
./run_tests.sh api      # åªè¿è¡ŒAPIå‚æ•°æµ‹è¯•
```

## ğŸ“Š æµ‹è¯•è¦†ç›–æƒ…å†µ

### å·²æµ‹è¯•çš„ Tool æ–¹æ³•ï¼ˆ100% è¦†ç›–ï¼‰

| Tool æ–¹æ³• | åŠŸèƒ½æè¿° | æµ‹è¯•çŠ¶æ€ |
|----------|---------|---------|
| `describe_clusters` | é›†ç¾¤åˆ—è¡¨æŸ¥è¯¢ | âœ… å®Œæˆ |
| `describe_cluster_detail` | é›†ç¾¤è¯¦æƒ…æŸ¥è¯¢ | âœ… å®Œæˆ |
| `modify_cluster` | é›†ç¾¤é…ç½®ä¿®æ”¹ | âœ… å®Œæˆ |
| `describe_task_info` | ä»»åŠ¡ä¿¡æ¯æŸ¥è¯¢ | âœ… å®Œæˆ |
| `create_cluster` | é›†ç¾¤åˆ›å»º | âœ… å®Œæˆ |
| `delete_cluster` | é›†ç¾¤åˆ é™¤ | âœ… å®Œæˆ |
| `upgrade_cluster` | é›†ç¾¤å‡çº§ | âœ… å®Œæˆ |
| `describe_cluster_logs` | é›†ç¾¤æ—¥å¿—æŸ¥è¯¢ | âœ… å®Œæˆ |
| `describe_user_quota` | ç”¨æˆ·é…é¢æŸ¥è¯¢ | âœ… å®Œæˆ |
| `describe_kubernetes_version_metadata` | K8sç‰ˆæœ¬å…ƒæ•°æ®æŸ¥è¯¢ | âœ… å®Œæˆ |

### æµ‹è¯•ç±»å‹è¦†ç›–

æ¯ä¸ª tool æ–¹æ³•éƒ½åŒ…å«ä»¥ä¸‹æµ‹è¯•åœºæ™¯ï¼š

- âœ… **æ­£å¸¸è°ƒç”¨æµ‹è¯•** - éªŒè¯æ–¹æ³•æ­£å¸¸æ‰§è¡Œè·¯å¾„
- âœ… **å‚æ•°éªŒè¯æµ‹è¯•** - éªŒè¯å„ç§è¾“å…¥å‚æ•°ç»„åˆ
- âœ… **é”™è¯¯å¤„ç†æµ‹è¯•** - éªŒè¯å¼‚å¸¸æƒ…å†µå¤„ç†
- âœ… **æƒé™æ§åˆ¶æµ‹è¯•** - éªŒè¯å†™æ“ä½œæƒé™æ§åˆ¶ï¼ˆé€‚ç”¨äºå†™æ“ä½œæ–¹æ³•ï¼‰
- âœ… **ä¸Šä¸‹æ–‡é›†æˆæµ‹è¯•** - éªŒè¯ä¸ FastMCP ä¸Šä¸‹æ–‡çš„é›†æˆ

## ğŸ› ï¸ æµ‹è¯•å·¥å…·

### æµ‹è¯•è¦†ç›–ç‡éªŒè¯

```bash
# éªŒè¯æµ‹è¯•è¦†ç›–ç‡
./run_tests.sh verify

# æˆ–è€…ç›´æ¥è¿è¡ŒéªŒè¯è„šæœ¬
python tests/verify_test_coverage.py
```

### å•ç‹¬è¿è¡Œæµ‹è¯•

```bash
# è¿è¡Œå•ä¸ªæµ‹è¯•æ–¹æ³•
python -m pytest tests/test_tool_methods.py::TestACKClusterManagementTools::test_describe_clusters -v

# è¿è¡Œæµ‹è¯•ç±»
python -m pytest tests/test_tool_methods.py::TestACKClusterManagementTools -v

# è¿è¡Œç‰¹å®šæµ‹è¯•æ–‡ä»¶
python -m pytest tests/test_tool_methods.py -v
```

## ğŸ”§ æ•…éšœæ’é™¤

### å¸¸è§é—®é¢˜

1. **å¯¼å…¥é”™è¯¯**
   - ç¡®ä¿åœ¨æ­£ç¡®çš„ç›®å½•ä¸‹è¿è¡Œæµ‹è¯•
   - æ£€æŸ¥ Python è·¯å¾„è®¾ç½®

2. **ç¯å¢ƒå˜é‡é—®é¢˜**
   - ç¡®ä¿ `.env` æ–‡ä»¶å­˜åœ¨ä¸”æ ¼å¼æ­£ç¡®
   - æ£€æŸ¥é˜¿é‡Œäº‘å‡­è¯æ˜¯å¦æœ‰æ•ˆ

3. **ä¾èµ–é—®é¢˜**
   - ç¡®ä¿å®‰è£…äº†æ‰€æœ‰å¿…éœ€çš„æµ‹è¯•ä¾èµ–
   - æ£€æŸ¥ fastmcp å’Œç›¸å…³ SDK ç‰ˆæœ¬

### è°ƒè¯•æ¨¡å¼

```bash
# å¯ç”¨è¯¦ç»†è¾“å‡º
python -m pytest tests/test_tool_methods.py -v -s --tb=long

# åªè¿è¡Œå¤±è´¥çš„æµ‹è¯•
python -m pytest tests/test_tool_methods.py --lf
```

## ğŸ“ˆ æµ‹è¯•ç»Ÿè®¡

- **æ€»æµ‹è¯•æ•°é‡**: 27 ä¸ªæµ‹è¯•ç”¨ä¾‹
- **æˆåŠŸç‡**: 100% (27/27)
- **è¦†ç›–çš„ Tool æ–¹æ³•**: 10/10 (100%)
- **æµ‹è¯•æ–‡ä»¶**: 3 ä¸ªä¸»è¦æµ‹è¯•æ–‡ä»¶
- **å¹³å‡æ‰§è¡Œæ—¶é—´**: ~1.5 ç§’

## ğŸ¯ ä¸‹ä¸€æ­¥

1. **æŒç»­é›†æˆ**: å°†æµ‹è¯•é›†æˆåˆ° CI/CD æµæ°´çº¿
2. **æ€§èƒ½æµ‹è¯•**: æ·»åŠ æ€§èƒ½åŸºå‡†æµ‹è¯•
3. **é›†æˆæµ‹è¯•**: æ·»åŠ ä¸çœŸå®é˜¿é‡Œäº‘æœåŠ¡çš„é›†æˆæµ‹è¯•
4. **æ–‡æ¡£æ›´æ–°**: ä¿æŒæµ‹è¯•æ–‡æ¡£ä¸ä»£ç åŒæ­¥